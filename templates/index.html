<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Gerenciamento de Dados</title>
</head>
<body>
    <h1>Gerenciamento de Dados</h1>

    <form method="POST" action="/save">
        <input type="hidden" name="user_id" id="user_id" value="">
        <label for="nome">Nome:</label>
        <input type="text" name="nome" id="nome" required><br>

        <label for="cargo">Cargo:</label>
        <input type="text" name="cargo" id="cargo" required><br>

        <label for "departamento">Departamento:</label>
        <input type="text" name="departamento" id="departamento" required><br>

        <label for="cpf">CPF:</label>
        <input type="text" name="cpf" id="cpf" required><br>

        <input type="submit" value="Salvar">
    </form>
	<a href="/generate_pdf" target="_blank">Gerar PDF da Lista</a>
    <h2>Usu√°rios cadastrados:</h2>
    <ul>
        {% for user in users %}
            <li>
                {{ user.nome }} - {{ user.cargo }} - {{ user.departamento }} - {{ user.cpf }}
                <button onclick="editUser('{{ user.id }}', '{{ user.nome }}', '{{ user.cargo }}', '{{ user.departamento }}', '{{ user.cpf }}')">Editar</button>
                <button onclick="deleteUser('{{ user.id }}')">Excluir</button>
            </li>
        {% endfor %}
    </ul>

    <script>
        function editUser(userId, nome, cargo, departamento, cpf) {
            document.getElementById('user_id').value = userId;
            document.getElementById('nome').value = nome;
            document.getElementById('cargo').value = cargo;
            document.getElementById('departamento').value = departamento;
            document.getElementById('cpf').value = cpf;
        }

        function deleteUser(userId) {
            const confirmDelete = confirm("Tem certeza de que deseja excluir este registro?");
            if (confirmDelete) {
                window.location.href = `/delete/${userId}`;
            }
        }
    </script>
</body>
</html>
